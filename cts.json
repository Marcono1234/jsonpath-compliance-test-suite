{
  "tests": [
    {
      "name": "root",
      "selector": "$",
      "document": [
        "first",
        "second"
      ],
      "result": [
        [
          "first",
          "second"
        ]
      ]
    },
    {
      "name": "no leading whitespace",
      "selector": " $",
      "invalid_selector": true
    },
    {
      "name": "no trailing whitespace",
      "selector": "$ ",
      "invalid_selector": true
    },
    {
      "name": "name shorthand",
      "selector": "$.a",
      "document": {
        "a": "A",
        "b": "B"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name shorthand, extended unicode ‚ò∫",
      "selector": "$.‚ò∫",
      "document": {
        "‚ò∫": "A",
        "b": "B"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name shorthand, underscore",
      "selector": "$._",
      "document": {
        "_": "A",
        "_foo": "B"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name shorthand, symbol",
      "selector": "$.&",
      "invalid_selector": true
    },
    {
      "name": "name shorthand, number",
      "selector": "$.1",
      "invalid_selector": true
    },
    {
      "name": "name shorthand, absent data",
      "selector": "$.c",
      "document": {
        "a": "A",
        "b": "B"
      },
      "result": []
    },
    {
      "name": "name shorthand, array data",
      "selector": "$.a",
      "document": [
        "first",
        "second"
      ],
      "result": []
    },
    {
      "name": "wildcard shorthand, object data",
      "selector": "$.*",
      "document": {
        "a": "A",
        "b": "B"
      },
      "result": [
        "A",
        "B"
      ]
    },
    {
      "name": "wildcard shorthand, array data",
      "selector": "$.*",
      "document": [
        "first",
        "second"
      ],
      "result": [
        "first",
        "second"
      ]
    },
    {
      "name": "wildcard selector, array data",
      "selector": "$[*]",
      "document": [
        "first",
        "second"
      ],
      "result": [
        "first",
        "second"
      ]
    },
    {
      "name": "wildcard shorthand, then name shorthand",
      "selector": "$.*.a",
      "document": {
        "x": {
          "a": "Ax",
          "b": "Bx"
        },
        "y": {
          "a": "Ay",
          "b": "By"
        }
      },
      "result": [
        "Ax",
        "Ay"
      ]
    },
    {
      "name": "name selector, double quotes",
      "selector": "$[\"a\"]",
      "document": {
        "a": "A",
        "b": "B"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, absent data",
      "selector": "$[\"c\"]",
      "document": {
        "a": "A",
        "b": "B"
      },
      "result": []
    },
    {
      "name": "name selector, double quotes, array data",
      "selector": "$[\"a\"]",
      "document": [
        "first",
        "second"
      ],
      "result": []
    },
    {
      "name": "name selector, double quotes, embedded U+0000",
      "selector": "$[\"\u0000\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0001",
      "selector": "$[\"\u0001\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0002",
      "selector": "$[\"\u0002\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0003",
      "selector": "$[\"\u0003\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0004",
      "selector": "$[\"\u0004\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0005",
      "selector": "$[\"\u0005\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0006",
      "selector": "$[\"\u0006\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0007",
      "selector": "$[\"\u0007\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0008",
      "selector": "$[\"\u0008\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0009",
      "selector": "$[\"\u0009\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+000A",
      "selector": "$[\"\u000A\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+000B",
      "selector": "$[\"\u000B\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+000C",
      "selector": "$[\"\u000C\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+000D",
      "selector": "$[\"\u000D\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+000E",
      "selector": "$[\"\u000E\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+000F",
      "selector": "$[\"\u000F\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0010",
      "selector": "$[\"\u0010\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0011",
      "selector": "$[\"\u0011\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0012",
      "selector": "$[\"\u0012\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0013",
      "selector": "$[\"\u0013\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0014",
      "selector": "$[\"\u0014\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0015",
      "selector": "$[\"\u0015\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0016",
      "selector": "$[\"\u0016\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0017",
      "selector": "$[\"\u0017\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0018",
      "selector": "$[\"\u0018\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0019",
      "selector": "$[\"\u0019\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+001A",
      "selector": "$[\"\u001A\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+001B",
      "selector": "$[\"\u001B\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+001C",
      "selector": "$[\"\u001C\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+001D",
      "selector": "$[\"\u001D\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+001E",
      "selector": "$[\"\u001E\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+001F",
      "selector": "$[\"\u001F\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded U+0020",
      "selector": "$[\"\u0020\"]",
      "document": {
        "\u0020": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, escaped double quote",
      "selector": "$[\"\\\"\"]",
      "document": {
        "\"": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, escaped reverse solidus",
      "selector": "$[\"\\\\\"]",
      "document": {
        "\\": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, escaped solidus",
      "selector": "$[\"\\/\"]",
      "document": {
        "/": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, escaped backspace",
      "selector": "$[\"\\b\"]",
      "document": {
        "\u0008": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, escaped form feed",
      "selector": "$[\"\\f\"]",
      "document": {
        "\u000C": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, escaped line feed",
      "selector": "$[\"\\n\"]",
      "document": {
        "\u000A": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, escaped carriage return",
      "selector": "$[\"\\r\"]",
      "document": {
        "\u000D": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, escaped tab",
      "selector": "$[\"\\t\"]",
      "document": {
        "\u0009": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, escaped ‚ò∫, upper case hex",
      "selector": "$[\"\\u263A\"]",
      "document": {
        "‚ò∫": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, escaped ‚ò∫, lower case hex",
      "selector": "$[\"\\u263a\"]",
      "document": {
        "‚ò∫": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, surrogate pair ùÑû",
      "selector": "$[\"\\uD834\\uDD1E\"]",
      "document": {
        "ùÑû": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, surrogate pair üòÄ",
      "selector": "$[\"\\uD83D\\uDE00\"]",
      "document": {
        "üòÄ": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, double quotes, invalid escaped single quote",
      "selector": "$[\"\\'\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, embedded double quote",
      "selector": "$[\"\"\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, double quotes, incomplete escape",
      "selector": "$[\"\\\"]",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes",
      "selector": "$['a']",
      "document": {
        "a": "A",
        "b": "B"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, absent data",
      "selector": "$['c']",
      "document": {
        "a": "A",
        "b": "B"
      },
      "result": []
    },
    {
      "name": "name selector, single quotes, array data",
      "selector": "$['a']",
      "document": [
        "first",
        "second"
      ],
      "result": []
    },
    {
      "name": "name selector, single quotes, embedded U+0000",
      "selector": "$['\u0000']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0001",
      "selector": "$['\u0001']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0002",
      "selector": "$['\u0002']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0003",
      "selector": "$['\u0003']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0004",
      "selector": "$['\u0004']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0005",
      "selector": "$['\u0005']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0006",
      "selector": "$['\u0006']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0007",
      "selector": "$['\u0007']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0008",
      "selector": "$['\u0008']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0009",
      "selector": "$['\u0009']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+000A",
      "selector": "$['\u000A']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+000B",
      "selector": "$['\u000B']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+000C",
      "selector": "$['\u000C']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+000D",
      "selector": "$['\u000D']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+000E",
      "selector": "$['\u000E']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+000F",
      "selector": "$['\u000F']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0010",
      "selector": "$['\u0010']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0011",
      "selector": "$['\u0011']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0012",
      "selector": "$['\u0012']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0013",
      "selector": "$['\u0013']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0014",
      "selector": "$['\u0014']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0015",
      "selector": "$['\u0015']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0016",
      "selector": "$['\u0016']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0017",
      "selector": "$['\u0017']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0018",
      "selector": "$['\u0018']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0019",
      "selector": "$['\u0019']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+001A",
      "selector": "$['\u001A']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+001B",
      "selector": "$['\u001B']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+001C",
      "selector": "$['\u001C']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+001D",
      "selector": "$['\u001D']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+001E",
      "selector": "$['\u001E']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+001F",
      "selector": "$['\u001F']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded U+0020",
      "selector": "$['\u0020']",
      "document": {
        "\u0020": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, escaped single quote",
      "selector": "$['\\'']",
      "document": {
        "'": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, escaped reverse solidus",
      "selector": "$['\\\\']",
      "document": {
        "\\": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, escaped solidus",
      "selector": "$['\\/']",
      "document": {
        "/": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, escaped backspace",
      "selector": "$['\\b']",
      "document": {
        "\u0008": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, escaped form feed",
      "selector": "$['\\f']",
      "document": {
        "\u000C": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, escaped line feed",
      "selector": "$['\\n']",
      "document": {
        "\u000A": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, escaped carriage return",
      "selector": "$['\\r']",
      "document": {
        "\u000D": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, escaped tab",
      "selector": "$['\\t']",
      "document": {
        "\u0009": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, escaped ‚ò∫, upper case hex",
      "selector": "$['\\u263A']",
      "document": {
        "‚ò∫": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, escaped ‚ò∫, lower case hex",
      "selector": "$['\\u263a']",
      "document": {
        "‚ò∫": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, surrogate pair ùÑû",
      "selector": "$['\\uD834\\uDD1E']",
      "document": {
        "ùÑû": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, surrogate pair üòÄ",
      "selector": "$['\\uD83D\\uDE00']",
      "document": {
        "üòÄ": "A"
      },
      "result": [
        "A"
      ]
    },
    {
      "name": "name selector, single quotes, invalid escaped double quote",
      "selector": "$['\\\"']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, embedded single quote",
      "selector": "$[''']",
      "invalid_selector": true
    },
    {
      "name": "name selector, single quotes, incomplete escape",
      "selector": "$['\\']",
      "invalid_selector": true
    },
    {
      "name": "multiple selectors",
      "selector": "$[0,2]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        0,
        2
      ]
    },
    {
      "name": "multiple selectors with whitespace",
      "selector": "$[ 0 , 1 ]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        0,
        1
      ]
    },
    {
      "name": "multiple selectors, name and index, array data",
      "selector": "$['a',1]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        1
      ]
    },
    {
      "name": "multiple selectors, name and index, object data",
      "selector": "$['a',1]",
      "document": {
        "a": 1,
        "b": 2
      },
      "result": [
        1
      ]
    },
    {
      "name": "multiple selectors, index and slice",
      "selector": "$[1,5:7]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        1,
        5,
        6
      ]
    },
    {
      "name": "multiple selectors, index and slice, overlapping",
      "selector": "$[1,0:3]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        1,
        0,
        1,
        2
      ]
    },
    {
      "name": "empty segment",
      "selector": "$[]",
      "invalid_selector": true
    },
    {
      "name": "index selector",
      "selector": "$[0]",
      "document": [
        "first",
        "second"
      ],
      "result": [
        "first"
      ]
    },
    {
      "name": "index selector, 1",
      "selector": "$[1]",
      "document": [
        "first",
        "second"
      ],
      "result": [
        "second"
      ]
    },
    {
      "name": "index selector, out of bound",
      "selector": "$[2]",
      "document": [
        "first",
        "second"
      ],
      "result": []
    },
    {
      "name": "index selector, overflowing index",
      "selector": "$[231584178474632390847141970017375815706539969331281128078915168015826259279872]",
      "invalid_selector": true
    },
    {
      "name": "index selector, not actually an index, overflowing index leads into general text",
      "selector": "$[231584178474632390847141970017375815706539969331281128078915168SomeRandomText]",
      "invalid_selector": true
    },
    {
      "name": "index selector, negative",
      "selector": "$[-1]",
      "document": [
        "first",
        "second"
      ],
      "result": [
        "second"
      ]
    },
    {
      "name": "index selector, more negative",
      "selector": "$[-2]",
      "document": [
        "first",
        "second"
      ],
      "result": [
        "first"
      ]
    },
    {
      "name": "index selector, negative out of bound",
      "selector": "$[-3]",
      "document": [
        "first",
        "second"
      ],
      "result": []
    },
    {
      "name": "index selector, on object",
      "selector": "$[0]",
      "document": {
        "foo": 1
      },
      "result": []
    },
    {
      "name": "index selector, leading 0",
      "selector": "$[01]",
      "invalid_selector": true
    },
    {
      "name": "index selector, leading -0",
      "selector": "$[-01]",
      "invalid_selector": true
    },
    {
      "name": "slice selector",
      "selector": "$[1:3]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        1,
        2
      ]
    },
    {
      "name": "slice selector with step",
      "selector": "$[1:6:2]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        1,
        3,
        5
      ]
    },
    {
      "name": "slice selector with everything omitted, short form",
      "selector": "$[:]",
      "document": [
        0,
        1,
        2,
        3
      ],
      "result": [
        0,
        1,
        2,
        3
      ]
    },
    {
      "name": "slice selector with everything omitted, long form",
      "selector": "$[::]",
      "document": [
        0,
        1,
        2,
        3
      ],
      "result": [
        0,
        1,
        2,
        3
      ]
    },
    {
      "name": "slice selector with start omitted",
      "selector": "$[:2]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        0,
        1
      ]
    },
    {
      "name": "slice selector with start and end omitted",
      "selector": "$[::2]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        0,
        2,
        4,
        6,
        8
      ]
    },
    {
      "name": "slice selector, negative step with default start and end",
      "selector": "$[::-1]",
      "document": [
        0,
        1,
        2,
        3
      ],
      "result": [
        3,
        2,
        1,
        0
      ]
    },
    {
      "name": "slice selector, negative step with default start",
      "selector": "$[:0:-1]",
      "document": [
        0,
        1,
        2,
        3
      ],
      "result": [
        3,
        2,
        1
      ]
    },
    {
      "name": "slice selector, negative step with default end",
      "selector": "$[2::-1]",
      "document": [
        0,
        1,
        2,
        3
      ],
      "result": [
        2,
        1,
        0
      ]
    },
    {
      "name": "slice selector, larger negative step",
      "selector": "$[::-2]",
      "document": [
        0,
        1,
        2,
        3
      ],
      "result": [
        3,
        1
      ]
    },
    {
      "name": "slice selector, negative range with default step",
      "selector": "$[-1:-3]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": []
    },
    {
      "name": "slice selector, negative range with negative step",
      "selector": "$[-1:-3:-1]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        9,
        8
      ]
    },
    {
      "name": "slice selector, negative range with larger negative step",
      "selector": "$[-1:-6:-2]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        9,
        7,
        5
      ]
    },
    {
      "name": "slice selector, larger negative range with larger negative step",
      "selector": "$[-1:-7:-2]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        9,
        7,
        5
      ]
    },
    {
      "name": "slice selector, negative from, positive to",
      "selector": "$[-5:7]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        5,
        6
      ]
    },
    {
      "name": "slice selector, negative from",
      "selector": "$[-2:]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        8,
        9
      ]
    },
    {
      "name": "slice selector, positive from, negative to",
      "selector": "$[1:-1]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8
      ]
    },
    {
      "name": "slice selector, negative from, positive to, negative step",
      "selector": "$[-1:1:-1]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        9,
        8,
        7,
        6,
        5,
        4,
        3,
        2
      ]
    },
    {
      "name": "slice selector, positive from, negative to, negative step",
      "selector": "$[7:-5:-1]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        7,
        6
      ]
    },
    {
      "name": "slice selector, too many colons",
      "selector": "$[1:2:3:4]",
      "invalid_selector": true
    },
    {
      "name": "slice selector, non-integer array index",
      "selector": "$[1:2:a]",
      "invalid_selector": true
    },
    {
      "name": "slice selector, zero step",
      "selector": "$[1:2:0]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": []
    },
    {
      "name": "slice selector, empty range",
      "selector": "$[2:2]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": []
    },
    {
      "name": "slice selector with everything omitted with empty array",
      "selector": "$[:]",
      "document": [],
      "result": []
    },
    {
      "name": "slice selector, negative step with empty array",
      "selector": "$[::-1]",
      "document": [],
      "result": []
    },
    {
      "name": "slice selector, maximal range with positive step",
      "selector": "$[0:10]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ]
    },
    {
      "name": "slice selector, maximal range with negative step",
      "selector": "$[9:0:-1]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        9,
        8,
        7,
        6,
        5,
        4,
        3,
        2,
        1
      ]
    },
    {
      "name": "slice selector, excessively large to value",
      "selector": "$[2:113667776004]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ]
    },
    {
      "name": "slice selector, excessively small from value",
      "selector": "$[-113667776004:1]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        0
      ]
    },
    {
      "name": "slice selector, excessively large from value with negative step",
      "selector": "$[113667776004:0:-1]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        9,
        8,
        7,
        6,
        5,
        4,
        3,
        2,
        1
      ]
    },
    {
      "name": "slice selector, excessively small to value with negative step",
      "selector": "$[3:-113667776004:-1]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        3,
        2,
        1,
        0
      ]
    },
    {
      "name": "slice selector, excessively large step",
      "selector": "$[1:10:113667776004]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        1
      ]
    },
    {
      "name": "slice selector, excessively small step",
      "selector": "$[-1:-10:-113667776004]",
      "document": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
      ],
      "result": [
        9
      ]
    },
    {
      "name": "slice selector, overflowing to value",
      "selector": "$[2:231584178474632390847141970017375815706539969331281128078915168015826259279872]",
      "invalid_selector": true
    },
    {
      "name": "slice selector, underflowing from value",
      "selector": "$[-231584178474632390847141970017375815706539969331281128078915168015826259279872:1]",
      "invalid_selector": true
    },
    {
      "name": "slice selector, overflowing from value with negative step",
      "selector": "$[231584178474632390847141970017375815706539969331281128078915168015826259279872:0:-1]",
      "invalid_selector": true
    },
    {
      "name": "slice selector, underflowing to value with negative step",
      "selector": "$[3:-231584178474632390847141970017375815706539969331281128078915168015826259279872:-1]",
      "invalid_selector": true
    },
    {
      "name": "slice selector, overflowing step",
      "selector": "$[1:10:231584178474632390847141970017375815706539969331281128078915168015826259279872]",
      "invalid_selector": true
    },
    {
      "name": "slice selector, underflowing step",
      "selector": "$[-1:-10:-231584178474632390847141970017375815706539969331281128078915168015826259279872]",
      "invalid_selector": true
    },
    {
      "name": "descendant segment, index",
      "selector" : "$..[1]",
      "document" : {"o": [0, 1, [2, 3]]},
      "result": [
        1,
        3
      ]
    },
    {
      "name": "descendant segment, name shorthand",
      "selector" : "$..a",
      "document" : {"o": [{"a": "b"}, {"a":"c"}]},
      "result": [
        "b",
        "c"
      ]
    },
    {
      "name": "descendant segment, wildcard shorthand, array data",
      "selector" : "$..*",
      "document" : [0, 1],
      "result": [
        0,
        1
      ]
    },
    {
      "name": "descendant segment, wildcard selector, array data",
      "selector" : "$..[*]",
      "document" : [0, 1],
      "result": [
        0,
        1
      ]
    },
    {
      "name": "descendant segment, wildcard shorthand, object data",
      "selector" : "$..*",
      "document" : {"a": "b"},
      "result": [
        "b"
      ]
    },
    {
      "name": "descendant segment, wildcard shorthand, nested data",
      "selector" : "$..*",
      "document" : {
        "o": [{"a": "b"}]
      },
      "result": [
        [
          {
            "a" : "b"
          }
        ],
        {
          "a" : "b"
        },
        "b"
      ]
    },
    {
      "name": "descendant segment, multiple selectors",
      "selector" : "$..['a', 'd']",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        "b",
        "e",
        "c",
        "f"
      ]
    },
    {
      "name": "bald descendant segment",
      "selector": "$..",
      "invalid_selector": true
    },
    {
      "name": "filter, existence",
      "selector" : "$[?@.a]",
      "document" : [{"a": "b", "d": "e"}, {"b":"c", "d": "f"}],
      "result": [
        {"a": "b", "d": "e"}
      ]
    },
    {
      "name": "filter, existence, present with null",
      "selector" : "$[?@.a]",
      "document" : [{"a": null, "d": "e"}, {"b":"c", "d": "f"}],
      "result": [
        {"a": null, "d": "e"}
      ]
    },
    {
      "name": "filter, equals string, single quotes",
      "selector" : "$[?@.a=='b']",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": "b", "d": "e"}
      ]
    },
    {
      "name": "filter, equals string, double quotes",
      "selector" : "$[?@.a==\"b\"]",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": "b", "d": "e"}
      ]
    },
    {
      "name": "filter, equals number",
      "selector" : "$[?@.a==1]",
      "document" : [{"a": 1, "d": "e"}, {"a":"c", "d": "f"}, {"a":2, "d": "f"}],
      "result": [
        {"a": 1, "d": "e"}
      ]
    },
    {
      "name": "filter, equals null",
      "selector" : "$[?@.a==null]",
      "document" : [{"a": null, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": null, "d": "e"}
      ]
    },
    {
      "name": "filter, equals null, absent from data",
      "selector" : "$[?@.a==null]",
      "document" : [{"d": "e"}, {"a":"c", "d": "f"}],
      "result": [
      ]
    },
    {
      "name": "filter, equals true",
      "selector" : "$[?@.a==true]",
      "document" : [{"a": true, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": true, "d": "e"}
      ]
    },
    {
      "name": "filter, equals false",
      "selector" : "$[?@.a==false]",
      "document" : [{"a": false, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": false, "d": "e"}
      ]
    },

    {
      "name": "filter, not-equals string, single quotes",
      "selector" : "$[?@.a!='b']",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a":"c", "d": "f"}
      ]
    },
    {
      "name": "filter, not-equals string, single quotes, different type",
      "selector" : "$[?@.a!='b']",
      "document" : [{"a": "b", "d": "e"}, {"a":1, "d": "f"}],
      "result": [
        {"a":1, "d": "f"}
      ]
    },
    {
      "name": "filter, not-equals string, double quotes",
      "selector" : "$[?@.a!=\"b\"]",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a":"c", "d": "f"}
      ]
    },
    {
      "name": "filter, not-equals string, double quotes, different types",
      "selector" : "$[?@.a!=\"b\"]",
      "document" : [{"a": "b", "d": "e"}, {"a":1, "d": "f"}],
      "result": [
        {"a":1, "d": "f"}
      ]
    },
    {
      "name": "filter, not-equals number",
      "selector" : "$[?@.a!=1]",
      "document" : [{"a": 1, "d": "e"}, {"a":2, "d": "f"}],
      "result": [
        {"a":2, "d": "f"}
      ]
    },
    {
      "name": "filter, not-equals number, different types",
      "selector" : "$[?@.a!=1]",
      "document" : [{"a": 1, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a":"c", "d": "f"}
      ]
    },
    {
      "name": "filter, not-equals null",
      "selector" : "$[?@.a!=null]",
      "document" : [{"a": null, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a":"c", "d": "f"}
      ]
    },
    {
      "name": "filter, not-equals null, absent from data",
      "selector" : "$[?@.a!=null]",
      "document" : [{"d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"d": "e"},
        {"a":"c", "d": "f"}
      ]
    },
    {
      "name": "filter, not-equals true",
      "selector" : "$[?@.a!=true]",
      "document" : [{"a": true, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a":"c", "d": "f"}
      ]
    },
    {
      "name": "filter, not-equals false",
      "selector" : "$[?@.a!=false]",
      "document" : [{"a": false, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a":"c", "d": "f"}
      ]
    },
    {
      "name": "filter, less than string, single quotes",
      "selector" : "$[?@.a<'c']",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": "b", "d": "e"}
      ]
    },
    {
      "name": "filter, less than string, double quotes",
      "selector" : "$[?@.a<\"c\"]",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": "b", "d": "e"}
      ]
    },
    {
      "name": "filter, less than number",
      "selector" : "$[?@.a<10]",
      "document" : [{"a": 1, "d": "e"}, {"a": 10, "d": "e"}, {"a":"c", "d": "f"}, {"a":20, "d": "f"}],
      "result": [
        {"a": 1, "d": "e"}
      ]
    },
    {
      "name": "filter, less than null",
      "selector" : "$[?@.a<null]",
      "document" : [{"a": null, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [ ]
    },
    {
      "name": "filter, less than true",
      "selector" : "$[?@.a<true]",
      "document" : [{"a": true, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [ ]
    },
    {
      "name": "filter, less than false",
      "selector" : "$[?@.a<false]",
      "document" : [{"a": false, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [ ]
    },
    {
      "name": "filter, less than or equal to string, single quotes",
      "selector" : "$[?@.a<='c']",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": "b", "d": "e"},
        {"a":"c", "d": "f"}
      ]
    },
    {
      "name": "filter, less than or equal to string, double quotes",
      "selector" : "$[?@.a<=\"c\"]",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": "b", "d": "e"},
        {"a":"c", "d": "f"}
      ]
    },
    {
      "name": "filter, less than or equal to number",
      "selector" : "$[?@.a<=10]",
      "document" : [{"a": 1, "d": "e"}, {"a": 10, "d": "e"}, {"a":"c", "d": "f"}, {"a":20, "d": "f"}],
      "result": [
        {"a": 1, "d": "e"},
        {"a": 10, "d": "e"}
      ]
    },
    {
      "name": "filter, less than or equal to null",
      "selector" : "$[?@.a<=null]",
      "document" : [{"a": null, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": null, "d": "e"}
      ]
    },
    {
      "name": "filter, less than or equal to true",
      "selector" : "$[?@.a<=true]",
      "document" : [{"a": true, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": true, "d": "e"}
      ]
    },
    {
      "name": "filter, less than or equal to false",
      "selector" : "$[?@.a<=false]",
      "document" : [{"a": false, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": false, "d": "e"}
      ]
    },
    {
      "name": "filter, greater than string, single quotes",
      "selector" : "$[?@.a>'c']",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}, {"a":"d", "d": "f"}],
      "result": [
        {"a":"d", "d": "f"}
      ]
    },
    {
      "name": "filter, greater than string, double quotes",
      "selector" : "$[?@.a>\"c\"]",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}, {"a":"d", "d": "f"}],
      "result": [
        {"a":"d", "d": "f"}
      ]
    },
    {
      "name": "filter, greater than number",
      "selector" : "$[?@.a>10]",
      "document" : [{"a": 1, "d": "e"}, {"a": 10, "d": "e"}, {"a":"c", "d": "f"}, {"a":20, "d": "f"}],
      "result": [
        {"a":20, "d": "f"}
      ]
    },
    {
      "name": "filter, greater than null",
      "selector" : "$[?@.a>null]",
      "document" : [{"a": null, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [ ]
    },
    {
      "name": "filter, greater than true",
      "selector" : "$[?@.a>true]",
      "document" : [{"a": true, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [ ]
    },
    {
      "name": "filter, greater than false",
      "selector" : "$[?@.a>false]",
      "document" : [{"a": false, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [ ]
    },
    {
      "name": "filter, greater than or equal to string, single quotes",
      "selector" : "$[?@.a>='c']",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}, {"a":"d", "d": "f"}],
      "result": [
        {"a":"c", "d": "f"},
        {"a":"d", "d": "f"}
      ]
    },
    {
      "name": "filter, greater than or equal to string, double quotes",
      "selector" : "$[?@.a>=\"c\"]",
      "document" : [{"a": "b", "d": "e"}, {"a":"c", "d": "f"}, {"a":"d", "d": "f"}],
      "result": [
        {"a":"c", "d": "f"},
        {"a":"d", "d": "f"}
      ]
    },
    {
      "name": "filter, greater than or equal to number",
      "selector" : "$[?@.a>=10]",
      "document" : [{"a": 1, "d": "e"}, {"a": 10, "d": "e"}, {"a":"c", "d": "f"}, {"a":20, "d": "f"}],
      "result": [
        {"a": 10, "d": "e"},
        {"a":20, "d": "f"}
      ]
    },
    {
      "name": "filter, greater than or equal to null",
      "selector" : "$[?@.a>=null]",
      "document" : [{"a": null, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": null, "d": "e"}
      ]
    },
    {
      "name": "filter, greater than or equal to true",
      "selector" : "$[?@.a>=true]",
      "document" : [{"a": true, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": true, "d": "e"}
      ]
    },
    {
      "name": "filter, greater than or equal to false",
      "selector" : "$[?@.a>=false]",
      "document" : [{"a": false, "d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a": false, "d": "e"}
      ]
    },
    {
      "name": "filter, exists and not-equals null, absent from data",
      "selector" : "$[?@.a&&@.a!=null]",
      "document" : [{"d": "e"}, {"a":"c", "d": "f"}],
      "result": [
        {"a":"c", "d": "f"}
      ]
    },
    {
      "name": "filter, and",
      "selector" : "$[?@.a>0&&@.a<10]",
      "document" : [{"a": -10, "d": "e"}, {"a":5, "d": "f"}, {"a":20, "d": "f"}],
      "result": [
        {"a":5, "d": "f"}
      ]
    },
    {
      "name": "filter, or",
      "selector" : "$[?@.a=='b'||@.a=='d']",
      "document" : [{"a": "a", "d": "e"}, {"a":"b", "d": "f"}, {"a":"c", "d": "f"}, {"a":"d", "d": "f"}],
      "result": [
        {"a":"b", "d": "f"},
        {"a":"d", "d": "f"}
      ]
    },
    {
      "name": "filter, not expression",
      "selector" : "$[?!(@.a=='b')]",
      "document" : [{"a": "a", "d": "e"}, {"a":"b", "d": "f"}, {"a":"d", "d": "f"}],
      "result": [
        {"a": "a", "d": "e"},
        {"a": "d", "d": "f"}
      ]
    },
    {
      "name": "filter, not exists",
      "selector" : "$[?!@.a]",
      "document" : [{"a": "a", "d": "e"}, {"d": "f"}, {"a":"d", "d": "f"}],
      "result": [
        {"d": "f"}
      ]
    },
    {
      "name": "filter, not exists, data null",
      "selector" : "$[?!@.a]",
      "document" : [{"a": null, "d": "e"}, {"d": "f"}, {"a":"d", "d": "f"}],
      "result": [
        {"d": "f"}
      ]
    },
    {
      "name": "filter, length function, string data",
      "selector" : "$[?length(@.a)>=2]",
      "document" : [{"a": "ab"}, {"a": "d"}],
      "result": [
        {"a": "ab"}
      ]
    },
    {
      "name": "filter, length function, array data",
      "selector" : "$[?length(@.a)>=2]",
      "document" : [{"a": [1,2,3]}, {"a": [1]}],
      "result": [
        {"a": [1,2,3]}
      ]
    },
    {
      "name": "filter, length function, missing data",
      "selector" : "$[?length(@.a)>=2]",
      "document" : [{"d": "f"}],
      "result": []
    },
    {
      "name": "filter, length function, non-array/string arg",
      "selector" : "$[?length(1)>=2]",
      "document" : [{"d": "f"}],
      "result": []
    },
    {
      "name": "filter, length function, result must be compared",
      "selector" : "$[?length(@.a)]",
      "invalid_selector": true
    },
    {
      "name": "filter, length function, no params",
      "selector" : "$[?length()==1]",
      "invalid_selector": true
    },
    {
      "name": "filter, length function, too many params",
      "selector" : "$[?length(@.a,@.b)==1]",
      "invalid_selector": true
    },
    {
      "name": "filter, count function",
      "selector" : "$[?count(@..*)>2]",
      "document" : [
        {"a": [1, 2, 3]},
        {"a": [1], "d": "f"},
        {"a": 1, "d": "f"}
      ],
      "result": [
        {"a": [1,2,3]},
        {"a": [1], "d":"f"}
      ]
    },
    {
      "name": "filter, count function, non-array/string arg",
      "selector" : "$[?count(1)>2]",
      "invalid_selector": true
    },
    {
      "name": "filter, count function, result must be compared",
      "selector" : "$[?count(@..*)]",
      "invalid_selector": true
    },
    {
      "name": "filter, count function, no params",
      "selector" : "$[?count()==1]",
      "invalid_selector": true
    },
    {
      "name": "filter, count function, too many params",
      "selector" : "$[?count(@.a,@.b)==1]",
      "invalid_selector": true
    },
    {
      "name": "filter, match function, found match",
      "selector" : "$[?match(@.a, 'a.*')]",
      "document" : [{"a": "ab"}],
      "result": [
        {"a":"ab"}
      ]
    },
    {
      "name": "filter, match function, double quotes",
      "selector" : "$[?match(@.a, \"a.*\")]",
      "document" : [{"a": "ab"}],
      "result": [
        {"a":"ab"}
      ]
    },
    {
      "name": "filter, match function, regex from the document",
      "selector" : "$.values[?match(@, $.regex)]",
      "document" : {"regex": "b.?b", "values": ["abc", "bcd", "bab", "bba", "bbab", "b", true, [], {}]},
      "result": ["bab"]
    },
    {
      "name": "filter, match function, don't select match",
      "selector" : "$[?!match(@.a, 'a.*')]",
      "document" : [{"a": "ab"}],
      "result": [
      ]
    },
    {
      "name": "filter, match function, not a match",
      "selector" : "$[?match(@.a, 'a.*')]",
      "document" : [{"a": "bc"}],
      "result": []
    },
    {
      "name": "filter, match function, select non-match",
      "selector" : "$[?!match(@.a, 'a.*')]",
      "document" : [{"a": "bc"}],
      "result": [{"a": "bc"}]
    },
    {
      "name": "filter, match function, non-string first arg",
      "selector" : "$[?match(1, 'a.*')]",
      "document" : [{"a": "bc"}],
      "result": []
    },
    {
      "name": "filter, match function, non-string second arg",
      "selector" : "$[?match(@.a, 1)]",
      "document" : [{"a": "bc"}],
      "result": []
    },
    {
      "name": "filter, match function, result cannot be compared",
      "selector" : "$[?match(@.a, 'a.*')==true]",
      "invalid_selector": true
    },
    {
      "name": "filter, match function, too few params",
      "selector" : "$[?match(@.a)==1]",
      "invalid_selector": true
    },
    {
      "name": "filter, match function, too many params",
      "selector" : "$[?match(@.a,@.b,@.c)==1]",
      "invalid_selector": true
    },
    {
      "name": "filter, search function, at the end",
      "selector" : "$[?search(@.a, 'a.*')]",
      "document" : [{"a": "the end is ab"}],
      "result": [
        {"a": "the end is ab"}
      ]
    },
    {
      "name": "filter, search function, double quotes",
      "selector" : "$[?search(@.a, \"a.*\")]",
      "document" : [{"a": "the end is ab"}],
      "result": [
        {"a": "the end is ab"}
      ]
    },
    {
      "name": "filter, search function, at the start",
      "selector" : "$[?search(@.a, 'a.*')]",
      "document" : [{"a": "ab is at the start"}],
      "result": [
        {"a": "ab is at the start"}
      ]
    },
    {
      "name": "filter, search function, in the middle",
      "selector" : "$[?search(@.a, 'a.*')]",
      "document" : [{"a": "contains two matches"}],
      "result": [
        {"a": "contains two matches"}
      ]
    },
    {
      "name": "filter, search function, regex from the document",
      "selector" : "$.values[?search(@, $.regex)]",
      "document" : {"regex": "b.?b", "values": ["abc", "bcd", "bab", "bba", "bbab", "b", true, [], {}]},
      "result": ["bab", "bba", "bbab"]
    },
    {
      "name": "filter, search function, don't select match",
      "selector" : "$[?!search(@.a, 'a.*')]",
      "document" : [{"a": "contains two matches"}],
      "result": []
    },
    {
      "name": "filter, search function, not a match",
      "selector" : "$[?search(@.a, 'a.*')]",
      "document" : [{"a": "bc"}],
      "result": []
    },
    {
      "name": "filter, search function, select non-match",
      "selector" : "$[?!search(@.a, 'a.*')]",
      "document" : [{"a": "bc"}],
      "result": [{"a": "bc"}]
    },
    {
      "name": "filter, search function, non-string first arg",
      "selector" : "$[?search(1, 'a.*')]",
      "document" : [{"a": "bc"}],
      "result": []
    },
    {
      "name": "filter, search function, non-string second arg",
      "selector" : "$[?search(@.a, 1)]",
      "document" : [{"a": "bc"}],
      "result": []
    },
    {
      "name": "filter, search function, result cannot be compared",
      "selector" : "$[?search(@.a, 'a.*')==true]",
      "invalid_selector": true
    },
    {
      "name": "filter, search function, too few params",
      "selector" : "$[?search(@.a)]",
      "invalid_selector": true
    },
    {
      "name": "filter, search function, too many params",
      "selector" : "$[?search(@.a,@.b,@.c)]",
      "invalid_selector": true
    }
  ]
}
